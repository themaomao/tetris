{"ast":null,"code":"import _slicedToArray from\"/Volumes/React Project/All Project/All React Project/tetrisprac-one-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import\"./GameController.css\";import{Action,actionForKey,actionIsDrop}from\"../Business/Input\";import{playerController}from\"../Business/PlayerController\";import{useDropTime}from\"../Hooks/useDropTime\";import{useInterval}from\"../Hooks/useInterval\";import{jsx as _jsx}from\"react/jsx-runtime\";var GameController=function GameController(_ref){var board=_ref.board,gameStats=_ref.gameStats,player=_ref.player,setGameOver=_ref.setGameOver,setPlayer=_ref.setPlayer;var _useDropTime=useDropTime({gameStats:gameStats}),_useDropTime2=_slicedToArray(_useDropTime,3),dropTime=_useDropTime2[0],pauseDropTime=_useDropTime2[1],resumeDropTime=_useDropTime2[2];useInterval(function(){handleInput({action:Action.SlowDrop});},dropTime);var onKeyUp=function onKeyUp(_ref2){var code=_ref2.code;var action=actionForKey(code);if(actionIsDrop(action))resumeDropTime();};var onKeyDown=function onKeyDown(_ref3){var code=_ref3.code;var action=actionForKey(code);if(action===Action.Pause){if(dropTime){pauseDropTime();}else{resumeDropTime();}}else if(action===Action.Quit){setGameOver(true);}else{if(actionIsDrop(action))pauseDropTime();if(!dropTime){return;}handleInput({action:action});}};var handleInput=function handleInput(_ref4){var action=_ref4.action;playerController({action:action,board:board,player:player,setPlayer:setPlayer,setGameOver:setGameOver});};return/*#__PURE__*/_jsx(\"input\",{className:\"GameController\",type:\"text\",onKeyDown:onKeyDown,onKeyUp:onKeyUp,autoFocus:true});};export default GameController;","map":{"version":3,"names":["Action","actionForKey","actionIsDrop","playerController","useDropTime","useInterval","jsx","_jsx","GameController","_ref","board","gameStats","player","setGameOver","setPlayer","_useDropTime","_useDropTime2","_slicedToArray","dropTime","pauseDropTime","resumeDropTime","handleInput","action","SlowDrop","onKeyUp","_ref2","code","onKeyDown","_ref3","Pause","Quit","_ref4","className","type","autoFocus"],"sources":["/Volumes/React Project/All Project/All React Project/tetrisprac-one-react/src/Components/GameController.js"],"sourcesContent":["import \"./GameController.css\";\n\nimport { Action, actionForKey, actionIsDrop } from \"../Business/Input\";\nimport { playerController } from \"../Business/PlayerController\";\n\nimport { useDropTime } from \"../Hooks/useDropTime\";\nimport { useInterval } from \"../Hooks/useInterval\";\n\nconst GameController = ({\n  board,\n  gameStats,\n  player,\n  setGameOver,\n  setPlayer\n}) => {\n  const [dropTime, pauseDropTime, resumeDropTime] = useDropTime({\n    gameStats\n  });\n\n  useInterval(() => {\n    handleInput({ action: Action.SlowDrop });\n  }, dropTime);\n\n  const onKeyUp = ({ code }) => {\n    const action = actionForKey(code);\n    if (actionIsDrop(action)) resumeDropTime();\n  };\n\n  const onKeyDown = ({ code }) => {\n    const action = actionForKey(code);\n\n    if (action === Action.Pause) {\n      if (dropTime) {\n        pauseDropTime();\n      } else {\n        resumeDropTime();\n      }\n    } else if (action === Action.Quit) {\n      setGameOver(true);\n    } else {\n      if (actionIsDrop(action)) pauseDropTime();\n      if (!dropTime) {\n        return;\n      }\n      handleInput({ action });\n    }\n  };\n\n  const handleInput = ({ action }) => {\n    playerController({\n      action,\n      board,\n      player,\n      setPlayer,\n      setGameOver\n    });\n  };\n\n  return (\n    <input\n      className=\"GameController\"\n      type=\"text\"\n      onKeyDown={onKeyDown}\n      onKeyUp={onKeyUp}\n      autoFocus\n    />\n  );\n};\n\nexport default GameController;"],"mappings":"+JAAA,MAAO,sBAAsB,CAE7B,OAASA,MAAM,CAAEC,YAAY,CAAEC,YAAY,KAAQ,mBAAmB,CACtE,OAASC,gBAAgB,KAAQ,8BAA8B,CAE/D,OAASC,WAAW,KAAQ,sBAAsB,CAClD,OAASC,WAAW,KAAQ,sBAAsB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAEnD,GAAM,CAAAC,cAAc,CAAG,QAAjB,CAAAA,cAAcA,CAAAC,IAAA,CAMd,IALJ,CAAAC,KAAK,CAAAD,IAAA,CAALC,KAAK,CACLC,SAAS,CAAAF,IAAA,CAATE,SAAS,CACTC,MAAM,CAAAH,IAAA,CAANG,MAAM,CACNC,WAAW,CAAAJ,IAAA,CAAXI,WAAW,CACXC,SAAS,CAAAL,IAAA,CAATK,SAAS,CAET,IAAAC,YAAA,CAAkDX,WAAW,CAAC,CAC5DO,SAAS,CAATA,SACF,CAAC,CAAC,CAAAK,aAAA,CAAAC,cAAA,CAAAF,YAAA,IAFKG,QAAQ,CAAAF,aAAA,IAAEG,aAAa,CAAAH,aAAA,IAAEI,cAAc,CAAAJ,aAAA,IAI9CX,WAAW,CAAC,UAAM,CAChBgB,WAAW,CAAC,CAAEC,MAAM,CAAEtB,MAAM,CAACuB,QAAS,CAAC,CAAC,CAC1C,CAAC,CAAEL,QAAQ,CAAC,CAEZ,GAAM,CAAAM,OAAO,CAAG,QAAV,CAAAA,OAAOA,CAAAC,KAAA,CAAiB,IAAX,CAAAC,IAAI,CAAAD,KAAA,CAAJC,IAAI,CACrB,GAAM,CAAAJ,MAAM,CAAGrB,YAAY,CAACyB,IAAI,CAAC,CACjC,GAAIxB,YAAY,CAACoB,MAAM,CAAC,CAAEF,cAAc,CAAC,CAAC,CAC5C,CAAC,CAED,GAAM,CAAAO,SAAS,CAAG,QAAZ,CAAAA,SAASA,CAAAC,KAAA,CAAiB,IAAX,CAAAF,IAAI,CAAAE,KAAA,CAAJF,IAAI,CACvB,GAAM,CAAAJ,MAAM,CAAGrB,YAAY,CAACyB,IAAI,CAAC,CAEjC,GAAIJ,MAAM,GAAKtB,MAAM,CAAC6B,KAAK,CAAE,CAC3B,GAAIX,QAAQ,CAAE,CACZC,aAAa,CAAC,CAAC,CACjB,CAAC,IAAM,CACLC,cAAc,CAAC,CAAC,CAClB,CACF,CAAC,IAAM,IAAIE,MAAM,GAAKtB,MAAM,CAAC8B,IAAI,CAAE,CACjCjB,WAAW,CAAC,IAAI,CAAC,CACnB,CAAC,IAAM,CACL,GAAIX,YAAY,CAACoB,MAAM,CAAC,CAAEH,aAAa,CAAC,CAAC,CACzC,GAAI,CAACD,QAAQ,CAAE,CACb,OACF,CACAG,WAAW,CAAC,CAAEC,MAAM,CAANA,MAAO,CAAC,CAAC,CACzB,CACF,CAAC,CAED,GAAM,CAAAD,WAAW,CAAG,QAAd,CAAAA,WAAWA,CAAAU,KAAA,CAAmB,IAAb,CAAAT,MAAM,CAAAS,KAAA,CAANT,MAAM,CAC3BnB,gBAAgB,CAAC,CACfmB,MAAM,CAANA,MAAM,CACNZ,KAAK,CAALA,KAAK,CACLE,MAAM,CAANA,MAAM,CACNE,SAAS,CAATA,SAAS,CACTD,WAAW,CAAXA,WACF,CAAC,CAAC,CACJ,CAAC,CAED,mBACEN,IAAA,UACEyB,SAAS,CAAC,gBAAgB,CAC1BC,IAAI,CAAC,MAAM,CACXN,SAAS,CAAEA,SAAU,CACrBH,OAAO,CAAEA,OAAQ,CACjBU,SAAS,MACV,CAAC,CAEN,CAAC,CAED,cAAe,CAAA1B,cAAc"},"metadata":{},"sourceType":"module","externalDependencies":[]}